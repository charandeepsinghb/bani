let X;function st(e){if(X==null)return X=e.classList.contains("enable-para"),X}let _="";function Fe(e){return _!=""||(_=e.getAttribute("data-bani-name")||""),_}let s=1,u=s,J,b="d-block",N;function ct(e){N=Fe(e),s=parseInt(localStorage.getItem("currentShabadStart_"+N))||1,u=s,J=e,st(e)&&(b="d-inline"),Ae(e)}function at(e){if(s<=1)return;lt(),u=s-1;const t=500;let n=0;for(;e.getBoundingClientRect().height<window.innerHeight;){s--;const o=document.getElementById("shabad_"+s);if(!o){s++;break}if(o.classList.add(b),e.getBoundingClientRect().height>window.innerHeight){o.classList.remove(b),s++;break}if(n>t)break;n++}localStorage.setItem("currentShabadStart_"+N,s)}function lt(){let t=s,n=Math.max(u,s);for(;t<=n;){const o=document.getElementById("shabad_"+t);if(o&&o.classList.remove(b),t-s>500)break;t++}}function dt(){let t=s;for(s=u+1;t<=u;){const n=document.getElementById("shabad_"+t);if(n&&n.classList.remove(b),t-s>500)break;t++}}function ut(e){if(!document.getElementById("shabad_"+(u+1)))return;dt(),u=s;const n=500;let o=0;for(;e.getBoundingClientRect().height<window.innerHeight;){const i=document.getElementById("shabad_"+u);if(!i)break;if(i.classList.add(b),e.getBoundingClientRect().height>window.innerHeight){i.classList.remove(b),u--;break}if(u++,o>n)break;o++}localStorage.setItem("currentShabadStart_"+N,s)}function Ae(e){let n=0;for(;e.getBoundingClientRect().height<window.innerHeight;){const o=document.getElementById("shabad_"+u);if(!o)break;if(o.classList.add(b),e.getBoundingClientRect().height>window.innerHeight){o.classList.remove(b),u--;break}if(u++,n>500)break;n++}localStorage.setItem("currentShabadStart_"+N,s)}function S(e){J&&(ft(),e&&(s=e),u=s,Ae(J))}function ft(){let e=s;const t=500;let n=0;for(;e<=u;){const o=document.getElementById("shabad_"+e);if(o&&o.classList.remove(b),e++,n>t)break;n++}}function Ne(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen().then(()=>{S(),ae()}):document.documentElement.requestFullscreen().then(()=>{S(),ae()})}const Te="floatingButtonX",He="floatingButtonY";function a(e,t){localStorage.setItem(e,t)}function _e(e){localStorage.removeItem(e)}function l(e){return localStorage.getItem(e)}const Re="fontSize",P="lineHeight",W="wordSpacing",ze="align",Z="punjabi",K="english",x="darkMode",O="fontColor",pe="fontColorSecond",M="backgroundColor",Ee="backgroundColorSecond",le="bookmarks",q="enableSwipe";function gt(){localStorage.clear()}function de(e){at(e)}function ue(e){ut(e)}function mt(){window.addEventListener("resize",()=>{ae()})}function k(e){return e!=null&&!isNaN(e)&&e!=="undefined"&&e!==""}function xe(...e){for(const t of e)if(t==null||isNaN(t)||t==="undefined")return!1;return!0}function I(e,t,n){return n>=e&&n<=t}function m(e){return e&&typeof e=="string"&&e.length>0}function ht(e){return!e||e.length==0}function kt(){const e=document.getElementById("leftAlign"),t=document.getElementById("middleAlign"),n=document.getElementById("rightAlign"),o=document.getElementById("justifyAlign"),i=document.getElementById("bani");Et(e,t,n,o,i),bt(e,t,n,o,i)}function bt(e,t,n,o,i){e.addEventListener("change",r=>{R("start",r.target.checked,i)}),t.addEventListener("change",r=>{R("center",r.target.checked,i)}),n.addEventListener("change",r=>{R("end",r.target.checked,i)}),o.addEventListener("change",r=>{R("justify",r.target.checked,i)})}function R(e,t,n){!t&&!m(e)||(n.style.textAlign=e,Lt(e))}function Lt(e){m(e)&&a(ze,e)}function pt(e,t,n,o,i,r){switch(i){case"start":r.style.textAlign=i,e.checked=!0;break;case"end":r.style.textAlign=i,n.checked=!0;break;case"center":r.style.textAlign=i,t.checked=!0;break;case"justify":r.style.textAlign=i,o.checked=!0;break}}function Et(e,t,n,o,i){const r=l(ze);m(r)&&pt(e,t,n,o,r,i)}function Bt(){const e=document.getElementById("background-color"),t=document.getElementById("background-color-picker-2");Ie(e,M),Ie(t,Ee),Se(e,M),Se(t,Ee),St(e),Be(e),Be(t)}function Be(e){e.addEventListener("click",t=>{fe(t.target.value)})}function Se(e,t){e.addEventListener("change",n=>{fe(n.target.value),a(t,n.target.value)})}function fe(e){document.documentElement.style.setProperty("--background-color",e)}function Oe(e,t){e.value=t}function Ie(e,t){let n=l(t);m(n)&&Oe(e,n)}const G="#ffffff";function St(e){document.getElementById("background-reset-icon").addEventListener("click",()=>{document.documentElement.style.setProperty("--background-color",G),Oe(e,G),a(M,G)})}function It(){let e=l(M);m(e)&&fe(e)}function yt(e,t=3e3){const n=document.getElementById("toast-container");n.textContent=e,n.classList.remove("hide"),n.classList.add("show"),setTimeout(()=>{n.classList.remove("show"),n.classList.add("hide")},t)}let Q=!1,L;function vt(e){const t=document.getElementById("bookmark"),n=document.getElementById("bookmarks-container"),o=Fe(e);L=Ct(),wt(n,o),_t(t,e),Ht(e,n,o),zt(o),Ot()}function Ct(e,t){const n=l(le);return m(n)?JSON.parse(n):[]}function wt(e,t){const n=L.filter(i=>{if(i.baniName==t)return!0});if(ht(n))return;let o="";for(const i of n){const r=Me(i.shabadPre,i.shabadId);o+=r}e.innerHTML=o}function Me(e,t){return`
    <div id='bookmark_${t}' class="bookmark" data-shabadid='${t}'>
      <a data-shabadid='${t}' href='#' class='bookmark-show' id='bookmark-show_${t}'>${e}</a>
      <button class="icon bookmark-delete" data-shabadid='${t}' id='bookmark-delete_${t}'>
        <span class="material-symbols-outlined" data-shabadid='${t}'>delete</span>
      </button>
    </div>
  `}function Ft(e,t,n,o){const i=e.target.closest(".gurmukhi");if(!Q||!(i!=null&&i.classList.contains("gurmukhi")))return;const r=At(i,n,o);r&&(Tt(t,r),xt(o,r.shabadId),Mt(r.shabadId),Nt(r),yt("Bookmark Added",800))}function At(e,t,n){const o=e.getAttribute("id"),i=Number.parseInt(o.replace("shabad_",""));for(const c of L)if((c==null?void 0:c.shabadId)==i&&(c==null?void 0:c.baniName)==n)return;if(L.includes(i))return;const r=e.innerText.trim().substring(0,20);return{shabadId:i,shabadPre:r,baniName:n}}function Nt(e){L.push(e);const t=JSON.stringify(L);a(le,t)}function Tt(e,t){const n=Me(t.shabadPre,t.shabadId);e.insertAdjacentHTML("beforeend",n)}function Ht(e,t,n){Rt(e,o=>{Ft(o,t,e,n)},500)}function _t(e,t){e.addEventListener("change",n=>{n.target.checked?(Q=!0,t.classList.add("prevent-selection")):(Q=!1,t.classList.remove("prevent-selection"))})}function Rt(e,t,n=500){let o;e.addEventListener("mousedown",i=>{o=setTimeout(()=>t(i),n)}),e.addEventListener("mouseup",()=>clearTimeout(o)),e.addEventListener("mouseleave",()=>clearTimeout(o)),e.addEventListener("touchstart",i=>{o=setTimeout(()=>t(i),n)}),e.addEventListener("touchend",()=>clearTimeout(o)),e.addEventListener("touchcancel",()=>clearTimeout(o))}function zt(e){const t=document.getElementsByClassName("bookmark-delete");for(const n of t)n.addEventListener("click",o=>{const i=Number(o.target.getAttribute("data-shabadid"));De(i,e),Pe(i)})}function xt(e,t){document.getElementById("bookmark-delete_"+t).addEventListener("click",o=>{const i=Number(o.target.getAttribute("data-shabadid"));De(i,e),Pe(i)})}function De(e,t){L=L.filter(o=>o.baniName==t&&o.shabadId!=e||o.baniName!=t);const n=JSON.stringify(L);a(le,n)}function Pe(e){document.getElementById("bookmark_"+e).remove()}function Ot(){const e=document.getElementsByClassName("bookmark-show");for(const t of e)We(t)}function Mt(e){const t=document.getElementById("bookmark-show_"+e);We(t)}function We(e){e.addEventListener("click",t=>{const n=t.target.getAttribute("data-shabadid");Dt(n)})}function Dt(e){S(e)}function Pt(){const e=document.getElementById("dark-mode");$t(e),Wt(e)}function Wt(e){e.addEventListener("change",t=>{t.target.checked?(ee("true"),a(x,"true")):(ee("false"),a(x,"false"))})}function ee(e){e==="true"?D(!0):e==="false"&&D(!1)}function te(e,t){t==="true"?e.checked=!0:t==="false"&&(e.checked=!1)}function $t(e){let t=l(x);m(t)||(t="false"),te(e,t)}function jt(){let e=l(x);m(e)||(e="false"),ee(e)}function D(e){if(e){document.body.classList.add("dark-mode");return}document.body.classList.remove("dark-mode")}const Xt=window.matchMedia("(prefers-color-scheme: dark)");Xt.addEventListener("change",e=>{const t=document.getElementById("dark-mode");e.matches?(D(!0),te(t,"true")):(D(!1),te(t,"false"))});function Gt(e){const t=document.getElementById("english");Vt(e,t),Ut(e,t)}function Ut(e,t){t.addEventListener("change",n=>{n.target.checked?(ne(e,"true"),a(K,"true")):(ne(e,"false"),a(K,"false")),S()})}function ne(e,t){t==="true"?e.classList.remove("hide-shabad-en"):t==="false"&&e.classList.add("hide-shabad-en")}function Yt(e,t){t==="true"?e.checked=!0:t==="false"&&(e.checked=!1)}function Vt(e,t){let n=l(K);m(n)||(n="false"),ne(e,n),Yt(t,n)}function Jt(e,t){let n=0,o=0,i=!1;const r=50,c=100,C=500;let p=0;e.style.touchAction="none",e.addEventListener("pointerdown",function(h){(h.pointerType==="touch"||h.pointerType==="pen")&&(i=!0,n=h.clientX,o=h.clientY,p=Date.now())}),e.addEventListener("pointerup",function(h){if(!i)return;i=!1;const w=h.clientX-n,T=h.clientY-o;Date.now()-p<=C&&Math.abs(T)<=c&&Math.abs(w)>=r&&(w<0?t("left"):t("right"))}),e.addEventListener("pointercancel",()=>{i=!1})}const oe={enabled:!0};function Zt(e){Jt(e,t=>{oe.enabled&&(t==="left"?ue(e):t==="right"&&de(e))})}function Kt(){const e=document.getElementById("enableSwipe");en(e),qt(e)}function qt(e){e.addEventListener("change",t=>{t.target.checked?(ie("true"),a(q,"true")):(ie("false"),a(q,"false"))})}function ie(e){e==="true"?oe.enabled=!0:e==="false"&&(oe.enabled=!1)}function Qt(e,t){t==="true"?e.checked=!0:t==="false"&&(e.checked=!1)}function en(e){let t=l(q);m(t)||(t="true"),ie(t),Qt(e,t)}function tn(){const e=document.getElementById("font-color"),t=document.getElementById("font-color-picker-2");Ce(e,O),Ce(t,pe),ve(e,O),ve(t,pe),nn(e),ye(e),ye(t)}function ye(e){e.addEventListener("click",t=>{ge(t.target.value)})}function ve(e,t){e.addEventListener("change",n=>{ge(n.target.value),a(t,n.target.value)})}function ge(e){document.documentElement.style.setProperty("--font-color",e)}function $e(e,t){e.value=t}function Ce(e,t){let n=l(t);m(n)&&$e(e,n)}const U="#000000";function nn(e){document.getElementById("font-reset-icon").addEventListener("click",()=>{document.documentElement.style.setProperty("--font-color",U),$e(e,U),a(O,U)})}function on(){let e=l(O);m(e)&&ge(e)}function y(e,t){e.value=Number.parseFloat(t).toFixed(2)}let je;function rn(e,t){je=setInterval(()=>{e()},t)}function we(e){clearInterval(je),e()}function v(e,t,n,o){e.addEventListener("pointerdown",i=>{rn(()=>{t()},o)}),e.addEventListener("pointerup",i=>{we(()=>{n()})}),e.addEventListener("pointerleave",i=>{we(()=>{n()})})}const Xe=1,Ge=200,Ue=1,Ye=.04;function sn(){const e=document.getElementById("font-input"),t=document.getElementById("bani");an(e,t),ln(e,t),cn(e,t)}function cn(e,t){e.addEventListener("change",n=>{k(n.target.value)&&I(Xe,Ge,n.target.value)&&(t.style.fontSize=n.target.value+"px",me(t))})}function an(e,t){const n=document.getElementById("font-increase");v(n,()=>{Ve(Ye,t,e)},()=>{me(t)},Ue)}function ln(e,t){const n=document.getElementById("font-decrease");v(n,()=>{Ve(-Ye,t,e)},()=>{me(t)},Ue)}function dn(){const e=document.getElementById("bani"),t=window.getComputedStyle(e).getPropertyValue("font-size"),n=Number.parseFloat(t.substring(0,t.length-2)),o=document.getElementById("font-input");y(o,n)}function Ve(e,t,n){const o=window.getComputedStyle(t).getPropertyValue("font-size");let r=Number.parseFloat(o.substring(0,o.length-2))+e;I(Xe,Ge,r)&&(y(n,r),t.style.fontSize=r+"px")}function un(e){const t=l(Re);if(k(t)){e.style.fontSize=t+"px";return}}function me(e){const t=window.getComputedStyle(e).getPropertyValue("font-size"),n=Number.parseFloat(t.substring(0,t.length-2));if(k(n)){a(Re,n);return}}const re=1,Je=10,Ze=10,Ke=.01;let f=null;function fn(){const e=document.getElementById("line-height-input"),t=document.getElementById("bani");mn(e,t),hn(e,t),gn(e,t)}function gn(e,t){e.addEventListener("change",n=>{const o=n.target.value;k(o)&&I(re,Je,o)?(t.style.lineHeight=o,f=Number.parseFloat(o),he(f)):(f=null,t.style.lineHeight="normal",_e(P))})}function mn(e,t){const n=document.getElementById("line-height-increase");v(n,()=>{qe(Ke,t,e)},()=>{he(f)},Ze)}function hn(e,t){const n=document.getElementById("line-height-decrease");v(n,()=>{qe(-Ke,t,e)},()=>{he(f)},Ze)}function qe(e,t,n){let o;f?o=f+e:o=re+e,I(re,Je,o)&&(f=o,y(n,f),t.style.lineHeight=f)}function kn(){const e=l(P);if(!k(e)){f=null;return}const t=document.getElementById("line-height-input");f=Number.parseFloat(e),y(t,e)}function bn(e){const t=l(P);if(k(t)){f=Number.parseFloat(t),e.style.lineHeight=f;return}f=null}function he(e){if(k(e)){a(P,e);return}}function Ln(e){const t=document.getElementById("punjabi");Bn(e,t),pn(e,t)}function pn(e,t){t.addEventListener("change",n=>{n.target.checked?(se(e,"true"),a(Z,"true")):(se(e,"false"),a(Z,"false")),S()})}function se(e,t){t==="true"?e.classList.remove("hide-shabad-pu"):t==="false"&&e.classList.add("hide-shabad-pu")}function En(e,t){t==="true"?e.checked=!0:t==="false"&&(e.checked=!1)}function Bn(e,t){let n=l(Z);m(n)||(n="false"),se(e,n),En(t,n)}const ce=1,Qe=20,et=10,tt=.01;let g=null;function Sn(){const e=document.getElementById("word-spacing-input"),t=document.getElementById("bani");yn(e,t),vn(e,t),In(e,t)}function In(e,t){e.addEventListener("change",n=>{let o=n.target.value;o&&(o=Number.parseFloat(o)),k(o)&&I(ce,Qe,o)?(t.style.wordSpacing=o+"px",g=Number.parseFloat(o),ke(g)):(g=null,t.style.wordSpacing="normal",_e(W))})}function yn(e,t){const n=document.getElementById("word-spacing-increase");v(n,()=>{nt(tt,t,e)},()=>{ke(g)},et)}function vn(e,t){const n=document.getElementById("word-spacing-decrease");v(n,()=>{nt(-tt,t,e)},()=>{ke(g)},et)}function nt(e,t,n){let o;g?o=g+e:o=ce+e,I(ce,Qe,o)&&(g=o,y(n,g),t.style.wordSpacing=g+"px")}function Cn(){const e=l(W);if(!k(e)){g=null;return}const t=document.getElementById("word-spacing-input");g=Number.parseFloat(e),y(t,e)}function wn(e){const t=l(W);if(k(t)){g=Number.parseFloat(t),e.style.wordSpacing=g+"px";return}g=null}function ke(e){if(k(e)){a(W,e);return}}let z=!1;function Fn(e,t){fetch("components/menu/menu.html").then(n=>{n.text().then(o=>{e.innerHTML=o,An(t)})}).catch(n=>{console.log(n)})}let B;function An(e){B||(B=document.getElementById("menu")),zn(e)}function Nn(){B||(B=document.getElementById("menu")),z?B.classList.add("menuClose"):B.classList.remove("menuClose"),z=!z}function Tn(){document.getElementById("reset-icon").addEventListener("click",()=>{gt(),location.reload()})}function Hn(){document.getElementById("restart-icon").addEventListener("click",()=>{S(1)})}function _n(e){sn(),fn(),Sn(),kt(),Ln(e),Gt(e),Kt(),Pt(),tn(),Bt(),vt(e)}function Rn(e){dn(),kn(),Cn(),ct(e)}function zn(e){Tn(),Hn(),_n(e),Rn(e)}let Y=window.innerWidth,V=window.innerHeight;function xn(e,t){fetch("components/floating-button/floating-button.html").then(n=>n.text()).then(n=>{e.innerHTML=n;const o=document.getElementById("menu-container");o&&Fn(o,t),Dn(t)}).catch(console.error)}function On(e){let t=l(Te),n=l(He);if(xe(t,n)){t=Number.parseFloat(t),n=Number.parseFloat(n);const o=e.offsetWidth;e.offsetHeight,be(e,t,n,o)}}let ot=0,it=0;function Mn(e,t){xe(e,t)&&(a(Te,e),a(He,t))}function Dn(e){const t=document.getElementById("floating-button");On(t);let n=!1,o=!1,i=!1,r=!1,c=!1,C=!1,p,h,w,T;function F(d,E){return d.closest(`#${E}`)!==null}t.addEventListener("pointerdown",d=>{r=F(d.target,"left-icon"),c=F(d.target,"right-icon"),i=F(d.target,"menu-icon"),C=F(d.target,"fullscreen-icon"),o=!0,n=!0,t.classList.remove("inactive"),p=d.clientX,h=d.clientY,w=t.offsetLeft,T=t.offsetTop,t.setPointerCapture(d.pointerId)}),t.addEventListener("pointermove",d=>{if(n){const E=d.clientX-p,A=d.clientY-h;if(Math.abs(E)>H||Math.abs(A)>H){const $=t.offsetWidth;t.offsetHeight;let j=w+E,rt=T+A;be(t,j,rt,$),i=!1,r=!1,c=!1,C=!1,o=!1}}});const H=15;t.addEventListener("pointerup",d=>{const E=d.clientX,A=d.clientY,Le=Math.abs(E-p),$=Math.abs(A-h),j=Le<=H&&$<=H;o&&j?(i&&Nn(),r&&de(e),c&&ue(e),C&&Ne()):n&&Mn(ot,it),n=!1,z||t.classList.add("inactive"),t.releasePointerCapture(d.pointerId)}),mt()}function be(e,t,n,o,i){Y=window.innerWidth,V=window.innerHeight;const r=o/2,c=10;t-r-c<0&&(t=r+c),t+r+c>Y&&(t=Y-r-c),n-r-c<0&&(n=r+c),n+r+c>V&&(n=V-r-c),ot=t,it=n,e.style.left=`${t}px`,e.style.top=`${n}px`,e.style.bottom="auto",e.style.right="auto"}function ae(){const e=document.getElementById("floating-button");if(!e)return;const t=e.offsetLeft,n=e.offsetTop,o=e.offsetWidth;e.offsetHeight,be(e,t,n,o)}function Pn(e){Wn(e)}function Wn(e){document.addEventListener("keydown",t=>{t.key==="ArrowLeft"||t.key==="A"||t.key==="a"?de(e):t.key==="ArrowRight"||t.key==="D"||t.key==="d"?ue(e):(t.key==="F"||t.key==="f")&&Ne()})}function $n(e){document.readyState==="complete"||document.readyState==="interactive"?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent&&document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&e()})}function jn(){const e=document.getElementById("bani");if(!e)return;const t=document.getElementById("floating-button-container");t!=null&&xn(t,e);function n(){un(e),bn(e),wn(e)}n(),Pn(e),Zt(e)}$n(jn);jt();It();on();Xn();function Xn(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("✅ Service Worker registered:",e.scope)}).catch(e=>{console.error("❌ Service Worker registration failed:",e)})}
